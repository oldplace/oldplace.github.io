<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>AGC046 赛后总结 | Oldplace</title><meta name="author" content="player"><meta name="copyright" content="player"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="比赛链接：https:&#x2F;&#x2F;atcoder.jp&#x2F;contests&#x2F;agc046 A. Takahashikun, The Strider题目链接：https:&#x2F;&#x2F;atcoder.jp&#x2F;contests&#x2F;agc046&#x2F;tasks&#x2F;agc046_a 题目大意：二维平面在原点，初始在原点，朝向南方，每次往面朝方向走一格，然后逆时针转 $X$ 度角，问经过几次后回到原点。 做法为啥能这么快就做出来了？猜结">
<meta property="og:type" content="article">
<meta property="og:title" content="AGC046 赛后总结">
<meta property="og:url" content="http://oldplace.github.io/2024/06/26/AGC046-%E8%B5%9B%E5%90%8E%E6%80%BB%E7%BB%93/index.html">
<meta property="og:site_name" content="Oldplace">
<meta property="og:description" content="比赛链接：https:&#x2F;&#x2F;atcoder.jp&#x2F;contests&#x2F;agc046 A. Takahashikun, The Strider题目链接：https:&#x2F;&#x2F;atcoder.jp&#x2F;contests&#x2F;agc046&#x2F;tasks&#x2F;agc046_a 题目大意：二维平面在原点，初始在原点，朝向南方，每次往面朝方向走一格，然后逆时针转 $X$ 度角，问经过几次后回到原点。 做法为啥能这么快就做出来了？猜结">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://oldplace.github.io/img/my%20avatar.jpg">
<meta property="article:published_time" content="2024-06-26T09:29:05.000Z">
<meta property="article:modified_time" content="2024-06-29T09:39:32.618Z">
<meta property="article:author" content="player">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://oldplace.github.io/img/my%20avatar.jpg"><link rel="shortcut icon" href="/img/author16.png"><link rel="canonical" href="http://oldplace.github.io/2024/06/26/AGC046-%E8%B5%9B%E5%90%8E%E6%80%BB%E7%BB%93/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":true,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'AGC046 赛后总结',
  isPost: true,
  isHome: false,
  isHighlightShrink: true,
  isToc: true,
  postUpdate: '2024-06-29 17:39:32'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="//at.alicdn.com/t/c/font_4233465_4sh0n7ckry.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/my%20avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">158</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">70</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img fixed" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="Oldplace"><span class="site-name">Oldplace</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">AGC046 赛后总结</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-06-26T09:29:05.000Z" title="发表于 2024-06-26 17:29:05">2024-06-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-06-29T09:39:32.618Z" title="更新于 2024-06-29 17:39:32">2024-06-29</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E4%BF%A1%E6%81%AF%E5%AD%A6/">信息学</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>22分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="AGC046 赛后总结"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="post-content" id="article-container"><p>比赛链接：<a target="_blank" rel="noopener" href="https://atcoder.jp/contests/agc046">https://atcoder.jp/contests/agc046</a></p>
<h1 id="A-Takahashikun-The-Strider"><a href="#A-Takahashikun-The-Strider" class="headerlink" title="A. Takahashikun, The Strider"></a>A. Takahashikun, The Strider</h1><p>题目链接：<a target="_blank" rel="noopener" href="https://atcoder.jp/contests/agc046/tasks/agc046_a">https://atcoder.jp/contests/agc046/tasks/agc046_a</a></p>
<p>题目大意：二维平面在原点，初始在原点，朝向南方，每次往面朝方向走一格，然后逆时针转 $X$ 度角，问经过几次后回到原点。</p>
<details class="toggle" ><summary class="toggle-button" style="">做法</summary><div class="toggle-content"><p>为啥能这么快就做出来了？猜结论吗？</p>
<p>手动模拟一下，好像是最小的 $n$ 满足：$nX\equiv 0\mod 360$ 。</p>
<p>也就是：</p>
<script type="math/tex; mode=display">\begin{align*}
t=&\frac{2X\pi}{360}\\
&\sum\limits_{i=0}^{n-1}sin(it)\\
=&\frac{cos\frac{2n-1}{2}t-cos\frac{t}{2}}{2sin\frac{t}{2}}\\
=&0\\
\end{align*}</script><p>等价于：$(n-1)t=2k\pi$ 或者 $nt=2k\pi$ 。</p>
<p>即：$\frac{2X(n-1)\pi}{360}=2k\pi\to (n-1)X=360k$ ，或者 $\frac{2Xn\pi}{360}=2k\pi\to nX=360k$ 。</p>
<p>同理：</p>
<script type="math/tex; mode=display">\begin{align*}
&\sum\limits_{i=0}^{n-1}cos(it)\\
=&\frac{sin\frac{2n-1}{2}t+sin\frac{t}{2}}{2sin\frac{t}{2}}\\
=&0\\
\end{align*}</script><p>等价于：$nt=2k\pi\to nX=360k$ 。</p>
<p>综上，$nX=360k$ 是回到原点的充要条件，显然就是上面说的那个东西。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">gcd</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span>&#123;<span class="keyword">return</span> !x ? y : <span class="built_in">gcd</span>(y % x, x);&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    cout &lt;&lt; <span class="number">360</span> / <span class="built_in">gcd</span>(n, <span class="number">360</span>) &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</div></details>
<h1 id="B-Extension"><a href="#B-Extension" class="headerlink" title="B. Extension"></a>B. Extension</h1><p>题目链接：<a target="_blank" rel="noopener" href="https://atcoder.jp/contests/agc046/tasks/agc046_b">https://atcoder.jp/contests/agc046/tasks/agc046_b</a></p>
<p>题目大意：给定一个初始为白 $A<em>B$ 的矩形，要求执行下列操作到 $C</em>D$ 的矩形，问有多少种不同的染色。</p>
<ol>
<li>在上面添加一行白色，并将这一行白色中添加任意一格黑色。</li>
<li>在右边添加一列白色，并将这一列白色中添加任意一格黑色。</li>
</ol>
<details class="toggle" ><summary class="toggle-button" style="">我的做法</summary><div class="toggle-content"><p>这种东西很典，就是给每种染色规定一个唯一的添加行列的顺序，然后直接 $dp$ 就行了。</p>
<p>首先肯定想着行列交换，显然在一种方案中行列能交换当且仅当后者不会在交点处涂黑，我们尽可能的让列靠前，对于所有 “ 行列 ” 无法交换的方案称为驻点。</p>
<p>问题来了，会有两个驻点方案吗？</p>
<p>不会，因为可以证明，以下构造出来的方案是驻点方案，且不是这个的方案都不是驻点方案：</p>
<p>对于任意一个染色方案，显然每一行或者每一列在生成的时候都会生成所在行或者列的第一个黑色。</p>
<p>知道每一行每一列生成的黑色是啥后，我们看当前的行数是否能生成下一列的黑色，能就生成，不能就先生成行的。</p>
<p>显然只要染色合法，就一定能生成一个方案，而且极其显然的是，一个方案能对应一个染色。</p>
<p>然后直接 $dp$ 计数就行了，时间复杂度：$O(n^2)$ 。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">3e3</span> + <span class="number">5</span>;</span><br><span class="line"><span class="type">const</span> LL mod = <span class="number">998244353</span>;</span><br><span class="line">LL dp[N][N][<span class="number">2</span>];</span><br><span class="line"><span class="type">int</span> A, B, C, D;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    cin &gt;&gt; A &gt;&gt; B &gt;&gt; C &gt;&gt; D;</span><br><span class="line">    dp[A][B][<span class="number">0</span>] = <span class="number">1ll</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = A; i &lt;= C; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = B; j &lt;= D; j++)&#123;</span><br><span class="line">            dp[i + <span class="number">1</span>][j][<span class="number">1</span>] = (dp[i + <span class="number">1</span>][j][<span class="number">1</span>] + (dp[i][j][<span class="number">0</span>] + dp[i][j][<span class="number">1</span>]) * j) % mod;</span><br><span class="line">            <span class="keyword">if</span>(i &gt; A) dp[i][j + <span class="number">1</span>][<span class="number">0</span>] = (dp[i][j + <span class="number">1</span>][<span class="number">0</span>] + dp[i][j][<span class="number">1</span>]) % mod;</span><br><span class="line">            dp[i][j + <span class="number">1</span>][<span class="number">0</span>] = (dp[i][j + <span class="number">1</span>][<span class="number">0</span>] + dp[i][j][<span class="number">0</span>] * i) % mod;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; (dp[C][D][<span class="number">0</span>] + dp[C][D][<span class="number">1</span>]) % mod &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</div></details>
<details class="toggle" ><summary class="toggle-button" style="">一个有意思的容斥做法</summary><div class="toggle-content"><p><a target="_blank" rel="noopener" href="https://www.luogu.com.cn/article/pgbld0pu">https://www.luogu.com.cn/article/pgbld0pu</a></p>
<p>先不管记重，$f_{i,j}=f_{i-1,j}<em>j+f_{i,j-1}</em>i$ ，假设前面是正确的，这里开始容斥，发现当 $(i,j)$ 不是黑色的时候会计两次。（这可以从转移分析得到）</p>
<p>所以正确的转移为 $f_{i,j}=f_{i-1,j}<em>j+f_{i,j-1}</em>i-f_{i-1,j-1}<em>(i-1)</em>(j-1)$ 。</p>
</div></details>
<h1 id="C-Shift"><a href="#C-Shift" class="headerlink" title="C. Shift"></a>C. Shift</h1><p>题目链接：<a target="_blank" rel="noopener" href="https://atcoder.jp/contests/agc046/tasks/agc046_c">https://atcoder.jp/contests/agc046/tasks/agc046_c</a></p>
<p>题目大意：每次选择字符串中的 $i&lt;j$ 满足 $s[i]=0,s[j]=1$ ，然后把 $1$ 放到 $0$ 左边，问经过至多 $K$ 次操作后能产生多少不同的字符串。</p>
<details class="toggle" ><summary class="toggle-button" style="">我的做法</summary><div class="toggle-content"><p>注意到可以用 $0$ 给 $1$ 分段，用 $1$ 的数量变成数组 $A$，然后状态 $A$ 能到状态 $B$ 当且仅当：</p>
<ol>
<li>$\sum\limits_{i=1}^{len}|A_{i}-B_{i}|\le K$</li>
<li>$\sum\limits_{i=1}^{j}B_{i}-A_{i}\ge 0$</li>
</ol>
<p>直接 $dp[i][j][k]$ 计数就行了。</p>
<p>但是需要加个类似前缀和优化的东西保证时间复杂度是 $O(n^3)$ 的。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"><span class="type">const</span> LL mod = <span class="number">998244353</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">3e2</span> + <span class="number">5</span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">get_char_array</span><span class="params">(<span class="type">char</span> *s)</span></span>&#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">char</span> ss[N];</span><br><span class="line">    cin &gt;&gt; ss;</span><br><span class="line">    <span class="built_in">memcpy</span>(s + <span class="number">1</span>, ss, <span class="built_in">sizeof</span>(<span class="type">char</span>) * (<span class="built_in">strlen</span>(ss) + <span class="number">1</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">char</span> st[N];</span><br><span class="line"><span class="type">int</span> n, m, a[N], b[N], K;</span><br><span class="line">LL dp[N][N][N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">get_char_array</span>(st); n = <span class="built_in">strlen</span>(st + <span class="number">1</span>);</span><br><span class="line">    cin &gt;&gt; K;</span><br><span class="line">    &#123;</span><br><span class="line">        st[++n] = <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> l = <span class="number">1</span>; l &lt;= n; l++)&#123;</span><br><span class="line">            <span class="type">int</span> r = l;</span><br><span class="line">            <span class="keyword">while</span>(st[r] == <span class="string">&#x27;1&#x27;</span>) r++;</span><br><span class="line">            a[++m] = r - l;</span><br><span class="line">            l = r;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++) b[i] = b[i - <span class="number">1</span>] + a[i];</span><br><span class="line">    K = <span class="built_in">min</span>(K, b[m]);</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1ll</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt;= K; j++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k = j; k &lt;= K; k++)&#123;</span><br><span class="line">                dp[i][j][k] = (dp[i][j][k] + dp[i - <span class="number">1</span>][j][k]) % mod;</span><br><span class="line">                <span class="keyword">if</span>(j) dp[i][j][k] = (dp[i][j][k] + dp[i][j - <span class="number">1</span>][k - <span class="number">1</span>]) % mod;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= K; j++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k = j; k &lt;= K; k++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(!dp[i - <span class="number">1</span>][j][k]) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> t = <span class="number">1</span>; t &lt;= j &amp;&amp; t &lt;= a[i]; t++) dp[i][j - t][k] = (dp[i][j - t][k] + dp[i - <span class="number">1</span>][j][k]) % mod;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    LL ans = <span class="number">0ll</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= K; i++) ans = (ans + dp[m][<span class="number">0</span>][i]) % mod;</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>和官方做法基本一致。</p>
</div></details>
<h1 id="D-Secret-Passage"><a href="#D-Secret-Passage" class="headerlink" title="D. Secret Passage"></a>D. Secret Passage</h1><p>题目链接：<a target="_blank" rel="noopener" href="https://atcoder.jp/contests/agc046/tasks/agc046_d">https://atcoder.jp/contests/agc046/tasks/agc046_d</a></p>
<p>题目大意：你可以对 $01$ 字符串做以下操作若干次，问有多少个本质不同字符串：</p>
<p>若字符串长度 $\ge 2$ ，删除前面两个字符中的一个，并且将另外一个插入到字符串中的任意位置。</p>
<details class="toggle" ><summary class="toggle-button" style="">我的做法</summary><div class="toggle-content"><p>首先一个典中典的事情，我们可以先不把没删除的字符插入，而是等到需要用时再插入，因此我们只关心在删除了一个前缀的情况下，我们手里能有多少个 $0$ ，多少个 $1$ 。</p>
<p>由于时间十分充裕，我们可以在 $O(n^3)$ 的时间处理出来。</p>
<p>现在的问题是，我们怎么在 $O(n^3)$ 的时间内，处理出所有可能的串？</p>
<p>首先先给所有的可能串分个类，根据其拥有的 $0$ 的个数和 $1$ 的个数，可以发现，在这两个确定后，我们其实只关心一个事情，能删的前缀的最大值是多少？</p>
<p>或者具体来说，在前面那个 $dp$ 做完后，我们实际上有一堆三元数：有多少个可以自由支配的 $0/1$ ，以及多长的后缀是固定的，可以看到在 $0/1$ 总数固定的情况下，后缀越短越好，因此总共有 $n^2$ 种不同的后缀。</p>
<p>这启示我们需要在 $O(n)$ 的时间针对一个种类求出答案，但是如果单独 $dp$ 这个复杂度寄中寄，注意到后缀长度是共同变量，启示我们一起处理一个大的 $dp$ ，然后每种是其中的部分和。</p>
<p>得到以下的 $dp$ ：</p>
<p>$f[i][j][k]$ 表示后缀匹配长度为 $i$ ，有 $j$ 个 $0$ ，$k$ 个 $1$ 的不同字符串数，匹配指最长的后缀满足是子序列，即能匹配就匹配。</p>
<p>对于三元数 $(j,k,len)$ ，显然其答案就是：$\sum\limits_{i=1}^{n-len+1}f[i][j][k]$ 。</p>
<p>总时间复杂度：$O(n^3)$ 。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"><span class="type">const</span> LL mod = <span class="number">998244353</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">3e2</span> + <span class="number">5</span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">get_char_array</span><span class="params">(<span class="type">char</span> *s)</span></span>&#123;</span><br><span class="line">    <span class="type">char</span> ss[N];</span><br><span class="line">    cin &gt;&gt; ss;</span><br><span class="line">    <span class="built_in">memcpy</span>(s + <span class="number">1</span>, ss, <span class="built_in">sizeof</span>(<span class="type">char</span>) * (<span class="built_in">strlen</span>(ss) + <span class="number">1</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">bool</span> dp[N][N][N];</span><br><span class="line">LL sum[N][N][N];</span><br><span class="line"><span class="type">char</span> st[N];</span><br><span class="line"><span class="type">int</span> n, cnt0[N], cnt1[N], las[N][N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">get_char_array</span>(st); n = <span class="built_in">strlen</span>(st + <span class="number">1</span>);</span><br><span class="line">    sum[n + <span class="number">1</span>][<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1ll</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = n + <span class="number">1</span>; i &gt;= <span class="number">2</span>; i--)&#123;<span class="comment">//i = 1 no operator</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt;= n; j++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k = <span class="number">0</span>; j + k &lt;= n; k++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(st[i - <span class="number">1</span>] == <span class="string">&#x27;0&#x27;</span>)&#123;</span><br><span class="line">                    sum[i - <span class="number">1</span>][j + <span class="number">1</span>][k] = (sum[i - <span class="number">1</span>][j + <span class="number">1</span>][k] + sum[i][j][k]) % mod;</span><br><span class="line">                    sum[i][j][k + <span class="number">1</span>] = (sum[i][j][k + <span class="number">1</span>] + sum[i][j][k]) % mod;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    sum[i - <span class="number">1</span>][j][k + <span class="number">1</span>] = (sum[i - <span class="number">1</span>][j][k + <span class="number">1</span>] + sum[i][j][k]) % mod;</span><br><span class="line">                    sum[i][j + <span class="number">1</span>][k] = (sum[i][j + <span class="number">1</span>][k] + sum[i][j][k]) % mod;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = n; i &gt;= <span class="number">1</span>; i--)&#123;</span><br><span class="line">        cnt0[i] += cnt0[i + <span class="number">1</span>] + (st[i] == <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">        cnt1[i] += cnt1[i + <span class="number">1</span>] + (st[i] == <span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">        las[cnt0[i]][cnt1[i]] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= n; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = i / <span class="number">2</span>; j &gt;= <span class="number">0</span>; j--)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k = i / <span class="number">2</span> - j; k &gt;= <span class="number">0</span>; k--)&#123;</span><br><span class="line">                <span class="keyword">if</span>(!dp[i][j][k]) <span class="keyword">continue</span>;</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="type">int</span> c0 = cnt0[i + <span class="number">1</span>] + j, c1 = cnt1[i + <span class="number">1</span>] + k;</span><br><span class="line">                    <span class="keyword">if</span>(c0 + c1) las[c0][c1] = <span class="built_in">max</span>(las[c0][c1], i + <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span>(i + <span class="number">2</span> &lt;= n)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(st[i + <span class="number">1</span>] == <span class="string">&#x27;0&#x27;</span> || st[i + <span class="number">2</span>] == <span class="string">&#x27;0&#x27;</span>) dp[i + <span class="number">2</span>][j + <span class="number">1</span>][k] = <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">if</span>(st[i + <span class="number">1</span>] == <span class="string">&#x27;1&#x27;</span> || st[i + <span class="number">2</span>] == <span class="string">&#x27;1&#x27;</span>) dp[i + <span class="number">2</span>][j][k + <span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(j &gt;= <span class="number">1</span> &amp;&amp; j + k &gt;= <span class="number">2</span>) dp[i][j - <span class="number">1</span>][k] = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span>(k &gt;= <span class="number">1</span> &amp;&amp; j + k &gt;= <span class="number">2</span>) dp[i][j][k - <span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span>(i + <span class="number">1</span> &lt;= n)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(j || k) dp[i + <span class="number">1</span>][j][k] = <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">if</span>(st[i + <span class="number">1</span>] == <span class="string">&#x27;0&#x27;</span> &amp;&amp; k) dp[i + <span class="number">1</span>][j + <span class="number">1</span>][k - <span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">if</span>(st[i + <span class="number">1</span>] == <span class="string">&#x27;1&#x27;</span> &amp;&amp; j) dp[i + <span class="number">1</span>][j - <span class="number">1</span>][k + <span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    LL ans = <span class="number">0ll</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= n; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; i + j &lt;= n; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(!i &amp;&amp; !j) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k = las[i][j]; k &gt;= <span class="number">1</span>; k--)&#123;</span><br><span class="line">                ans = (ans + sum[k][i][j]) % mod;</span><br><span class="line">            &#125;</span><br><span class="line">            ans--;</span><br><span class="line">            ans++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但感觉这种做法尽显暴力，等会看看正解是怎么优雅的做出这道题目的。</p>
<p>在此之前，我来证明一个在赛时没时间证明的想法：</p>
<p>删除任何一个前缀，假设可支配 $x$ 个 $0$ 和 $y$ 个 $1$ ，并且 $x+y$ 确定，那么 $x$ 的范围是个区间。</p>
<p><details class="toggle" ><summary class="toggle-button" style="">证明</summary><div class="toggle-content"><p>我们可以考虑这么一个事情，给定一个前缀，给其标 $0/1$ ，$0$ 表示保留，$1$ 表示删掉，然后问这是否是一种合法的方案。</p></p>
<p>注：由于博主疏忽大意，后面记得根据语境区分 $0/1$ 指的是删除标记还是字符串的 $0/1$ 。</p>
<p>这个问题存在一种简单的判法，从左到右，如果接下来有两个字符，而且有至少一个 $1$ ，那么就直接对这两个字符操作，如果有两个 $0$ 或者只剩下一个字符，就搭一个 $1$ 进去操作（手中没有 $0$ 就不合法），等到没有剩余字符在前缀的时候，就拿手中的 $0$ 去消除手中的 $1$ 就行了（手中有 $1$ 但没 $0$ 就不合法），这样就能判断是否合法。</p>
<p>这个判法的证明也不难：</p>
<p><details class="toggle" ><summary class="toggle-button" style="">证明</summary><div class="toggle-content"><p>对于 $2$ 个以上连续的 $0$ ，我们不妨设为 $L00R$ ，一定可以把这个过程分为 $L0,0R$ ，即一定是先做完 $L0$ ，再做 $0R$ （手中 $0,1$ 数量不会消失），注意到不合法当且仅当 $1$ 的数量不够了，因此我们希望在 $L0$ 处获得尽可能多的 $1$ ，对应的，上面的过程中遇到 $00$ ，我们都能进行这样子的划分，对于每一段，证明就变得十分的简单了，一定是：</p></p>
<p>$AB$ ，其中 $A$ 是长度为 $2len$ 的字符串，满足 $2i-1,2i$ 中至少有一个 $1$ ，$B$ 全是 $0$ ，这种段的最优策略是显然的，而显然，将这些最优策略拼起来就是整体最优的，而拼起来的策略就是上面的策略，所以就证明了上面的策略就是整体最优的。</p>
<p>证毕。</p>
</div></details>
<p>根据这个判法，我们可以将任意一种方案在每次只移动一个 $1$ 的情况下，变成下面这种方案：</p>
<p>假设总共有 $t$ 个 $1$ ，现在所有奇数位置放个 $1$ ，剩下的 $1$ 从左往右依次放在空着的偶数里。</p>
<p>鉴于这种移动可逆，所以所有的方案都可以通过这种方式互达，同时这种移动只会造成 $1$ 的变化，从而证明是个区间。</p>
<p>事实上，我们也可以加上加一个 $1$ 减一个 $1$ 的操作，从而得到在不固定 $x+y$ 的情况下 $(x+y,x)$ 的所在范围。</p>
<p>但是这个范围并没有很好，举个例子：</p>
<p>$111100110011001100$</p>
<p>至少需要 $4$ 步才能变成 $-1$ 的局面，而显然，利用这个例子，我们可以轻松的构造一个字符串使得 $x+y$ 相差为 $1$ 的 $x$ 的范围差别很大（指上下界差别很大）。</p>
<p>那难道是在 $x+y=\left\lceil\frac{n}{2}\right\rceil$ 时才会发生这种情况吗？</p>
<p>不对，可以通过类似的方法，构造出 $x+y-\left\lceil\frac{n}{2}\right\rceil$ 任意大的错误例子：</p>
<p>核心思路是：开头若干个 $11$ 提供多出来的 $1$ ，然后一个单独的 $0$ 消耗 $1$ ，然后若干个 $0110$ 加大相邻两个单独的 $1$ 之间的距离，然后再放一个单独的 $0$ 循环往复。</p>
<p>上面例子拆分就是：$11/11/0/0110/0110/0110/0$ ，为什么这个需要花多步呢？</p>
<p>因为每次尝试把 $1$ 放到 $0$ 上面时，会发现影响只是整体右移，不会导致最后手里有多余的 $1$ （因为注意到如果最后手中有多余的 $1$ ，就可以删除这个 $1$ 证明在 $x+y$ 插值绝对值不超过 $1$ 的情况下， $x$ 的上下界差值的绝对值也不超过 $1$）。</p>
<p>这里实操一下就知道了：</p>
<p>$11/11/0/0110/0110/0110/0\to 10/11/1/0110/0110/0110/0\to 10/11/1011/0/0110/0110/0$</p>
<p>而最后能多出 $1$ 一定是通过移动把两个单独的 $0$ 放到了一起，然后再放一个 $1$ 同时把两个单独的 $0$ 用一个 $1$ 解决了，从而节省一个 $1$ 。但是这个移动的过程所花费的大量的移动就已经足够把相邻 $x+y$ 的 $x$ 的上下界拉得足够大了。</p>
<p>所以不固定 $x+y$ 的情况下 $(x+y,x)$ 的范围不一定是好的。</p>
<p>虽然但是，上面的反例似乎只是说明这种方法无法证明范围是好的，也许范围就是好的，或者部分好的，只是方法问题？不知道，感觉这个的证明或者证伪已经超出了博主目前的实力范围了。</p>
<p>但是还是用代码验证一下刚才的那个说法：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> LL;</span><br><span class="line"><span class="type">const</span> LL mod = <span class="number">998244353</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">3e2</span> + <span class="number">5</span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">get_char_array</span><span class="params">(<span class="type">char</span> *s)</span></span>&#123;</span><br><span class="line">    <span class="type">char</span> ss[N];</span><br><span class="line">    cin &gt;&gt; ss;</span><br><span class="line">    <span class="built_in">memcpy</span>(s + <span class="number">1</span>, ss, <span class="built_in">sizeof</span>(<span class="type">char</span>) * (<span class="built_in">strlen</span>(ss) + <span class="number">1</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">bool</span> dp[N][N][N];</span><br><span class="line"><span class="type">char</span> st[N];</span><br><span class="line"><span class="type">int</span> n, cnt0[N], cnt1[N], las[N][N];</span><br><span class="line"><span class="type">int</span> ll[N], rr[N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">get_char_array</span>(st); n = <span class="built_in">strlen</span>(st + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = n; i &gt;= <span class="number">1</span>; i--)&#123;</span><br><span class="line">        cnt0[i] += cnt0[i + <span class="number">1</span>] + (st[i] == <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">        cnt1[i] += cnt1[i + <span class="number">1</span>] + (st[i] == <span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">        las[cnt0[i]][cnt1[i]] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= n; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = i / <span class="number">2</span>; j &gt;= <span class="number">0</span>; j--)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k = i / <span class="number">2</span> - j; k &gt;= <span class="number">0</span>; k--)&#123;</span><br><span class="line">                <span class="keyword">if</span>(!dp[i][j][k]) <span class="keyword">continue</span>;</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="type">int</span> c0 = cnt0[i + <span class="number">1</span>] + j, c1 = cnt1[i + <span class="number">1</span>] + k;</span><br><span class="line">                    <span class="keyword">if</span>(c0 + c1) las[c0][c1] = <span class="built_in">max</span>(las[c0][c1], i + <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span>(i + <span class="number">2</span> &lt;= n)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(st[i + <span class="number">1</span>] == <span class="string">&#x27;0&#x27;</span> || st[i + <span class="number">2</span>] == <span class="string">&#x27;0&#x27;</span>) dp[i + <span class="number">2</span>][j + <span class="number">1</span>][k] = <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">if</span>(st[i + <span class="number">1</span>] == <span class="string">&#x27;1&#x27;</span> || st[i + <span class="number">2</span>] == <span class="string">&#x27;1&#x27;</span>) dp[i + <span class="number">2</span>][j][k + <span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(j &gt;= <span class="number">1</span> &amp;&amp; j + k &gt;= <span class="number">2</span>) dp[i][j - <span class="number">1</span>][k] = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span>(k &gt;= <span class="number">1</span> &amp;&amp; j + k &gt;= <span class="number">2</span>) dp[i][j][k - <span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span>(i + <span class="number">1</span> &lt;= n)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(j || k) dp[i + <span class="number">1</span>][j][k] = <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">if</span>(st[i + <span class="number">1</span>] == <span class="string">&#x27;0&#x27;</span> &amp;&amp; k) dp[i + <span class="number">1</span>][j + <span class="number">1</span>][k - <span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">if</span>(st[i + <span class="number">1</span>] == <span class="string">&#x27;1&#x27;</span> &amp;&amp; j) dp[i + <span class="number">1</span>][j - <span class="number">1</span>][k + <span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n / <span class="number">2</span>; i++) ll[i] = n + <span class="number">1</span>, rr[i] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> l = <span class="number">0</span>; l &lt;= n / <span class="number">2</span>; l++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> r = <span class="number">0</span>; l + r &lt;= n / <span class="number">2</span>; r++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(dp[n][l][r]) ll[l + r] = <span class="built_in">min</span>(ll[l + r], l), rr[l + r] = <span class="built_in">max</span>(rr[l + r], l);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n / <span class="number">2</span>; i++)&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;x + y = &quot;</span> &lt;&lt; i &lt;&lt; <span class="string">&quot; : [&quot;</span> &lt;&lt; ll[i] &lt;&lt; <span class="string">&quot; , &quot;</span> &lt;&lt; rr[i] &lt;&lt; <span class="string">&quot;]&quot;</span> &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">input:</span><br><span class="line"></span><br><span class="line">111111110011001100110011001100110001100110011001100110011000110011001100110011001100011001100110011001100110</span><br><span class="line"></span><br><span class="line">output:</span><br><span class="line">x + y = 1 : [0 , 1]</span><br><span class="line">x + y = 2 : [0 , 2]</span><br><span class="line">x + y = 3 : [0 , 3]</span><br><span class="line">x + y = 4 : [0 , 4]</span><br><span class="line">x + y = 5 : [0 , 5]</span><br><span class="line">x + y = 6 : [0 , 6]</span><br><span class="line">x + y = 7 : [0 , 7]</span><br><span class="line">x + y = 8 : [0 , 8]</span><br><span class="line">x + y = 9 : [0 , 9]</span><br><span class="line">x + y = 10 : [0 , 10]</span><br><span class="line">x + y = 11 : [0 , 11]</span><br><span class="line">x + y = 12 : [0 , 12]</span><br><span class="line">x + y = 13 : [0 , 13]</span><br><span class="line">x + y = 14 : [0 , 14]</span><br><span class="line">x + y = 15 : [0 , 15]</span><br><span class="line">x + y = 16 : [0 , 16]</span><br><span class="line">x + y = 17 : [0 , 17]</span><br><span class="line">x + y = 18 : [0 , 18]</span><br><span class="line">x + y = 19 : [0 , 19]</span><br><span class="line">x + y = 20 : [0 , 20]</span><br><span class="line">x + y = 21 : [0 , 21]</span><br><span class="line">x + y = 22 : [0 , 22]</span><br><span class="line">x + y = 23 : [0 , 23]</span><br><span class="line">x + y = 24 : [0 , 24]</span><br><span class="line">x + y = 25 : [0 , 25]</span><br><span class="line">x + y = 26 : [0 , 26]</span><br><span class="line">x + y = 27 : [0 , 27]</span><br><span class="line">x + y = 28 : [0 , 28]</span><br><span class="line">x + y = 29 : [0 , 29]</span><br><span class="line">x + y = 30 : [0 , 30]</span><br><span class="line">x + y = 31 : [0 , 31]</span><br><span class="line">x + y = 32 : [0 , 32]</span><br><span class="line">x + y = 33 : [0 , 33]</span><br><span class="line">x + y = 34 : [0 , 34]</span><br><span class="line">x + y = 35 : [0 , 35]</span><br><span class="line">x + y = 36 : [0 , 36]</span><br><span class="line">x + y = 37 : [0 , 37]</span><br><span class="line">x + y = 38 : [0 , 38]</span><br><span class="line">x + y = 39 : [0 , 39]</span><br><span class="line">x + y = 40 : [0 , 40]</span><br><span class="line">x + y = 41 : [0 , 41]</span><br><span class="line">x + y = 42 : [0 , 42]</span><br><span class="line">x + y = 43 : [0 , 43]</span><br><span class="line">x + y = 44 : [0 , 44]</span><br><span class="line">x + y = 45 : [0 , 45]</span><br><span class="line">x + y = 46 : [0 , 46]</span><br><span class="line">x + y = 47 : [0 , 47]</span><br><span class="line">x + y = 48 : [0 , 48]</span><br><span class="line">x + y = 49 : [0 , 49]</span><br><span class="line">x + y = 50 : [0 , 50]</span><br><span class="line">x + y = 51 : [0 , 51]</span><br><span class="line">x + y = 52 : [0 , 52]</span><br><span class="line">x + y = 53 : [7 , 45]</span><br><span class="line">x + y = 54 : [14 , 38]</span><br></pre></td></tr></table></figure>
<p>至少从例子上来看，范围不是绝对好的，至于是不是部分好的，这就不在我能力范围之内了。</p></div></details>
<p>证完了，看看题解。</p>
<p>看完了，基本一致。</p>
<p>但是看到一份很短的代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MOD=<span class="number">998244353</span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> &amp;x,<span class="type">int</span> v)</span></span>&#123;((x+=v)&gt;=MOD)&amp;&amp;(x-=MOD);&#125;</span><br><span class="line"><span class="type">int</span> n,ok[<span class="number">305</span>][<span class="number">305</span>][<span class="number">305</span>],dp[<span class="number">305</span>][<span class="number">305</span>][<span class="number">305</span>],res;</span><br><span class="line"><span class="type">char</span> s[<span class="number">305</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,s+<span class="number">1</span>);n=<span class="built_in">strlen</span>(s+<span class="number">1</span>);ok[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="keyword">for</span>(<span class="type">int</span> j=n;~j;j--)<span class="keyword">for</span>(<span class="type">int</span> k=n;~k;k--)&#123;</span><br><span class="line">		ok[i][j][k]|=ok[i<span class="number">-1</span>][j][k];</span><br><span class="line">		ok[i][j][k]|=ok[i][j+<span class="number">1</span>][k];</span><br><span class="line">		ok[i][j][k]|=ok[i][j][k+<span class="number">1</span>];</span><br><span class="line">		<span class="keyword">if</span>(j&amp;&amp;i&gt;=<span class="number">2</span>&amp;&amp;(s[i]==<span class="string">&#x27;0&#x27;</span>||s[i<span class="number">-1</span>]==<span class="string">&#x27;0&#x27;</span>))ok[i][j][k]|=ok[i<span class="number">-2</span>][j<span class="number">-1</span>][k];</span><br><span class="line">		<span class="keyword">if</span>(k&amp;&amp;i&gt;=<span class="number">2</span>&amp;&amp;(s[i]==<span class="string">&#x27;1&#x27;</span>||s[i<span class="number">-1</span>]==<span class="string">&#x27;1&#x27;</span>))ok[i][j][k]|=ok[i<span class="number">-2</span>][j][k<span class="number">-1</span>];</span><br><span class="line">		<span class="keyword">if</span>(j&amp;&amp;s[i]==<span class="string">&#x27;0&#x27;</span>)ok[i][j][k]|=ok[i<span class="number">-1</span>][j<span class="number">-1</span>][k+<span class="number">1</span>];</span><br><span class="line">		<span class="keyword">if</span>(k&amp;&amp;s[i]==<span class="string">&#x27;1&#x27;</span>)ok[i][j][k]|=ok[i<span class="number">-1</span>][j+<span class="number">1</span>][k<span class="number">-1</span>];</span><br><span class="line">	&#125;</span><br><span class="line">	dp[n][<span class="number">0</span>][<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=n;i;i--)<span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;=n;j++)<span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">0</span>;k&lt;=n;k++)&#123;</span><br><span class="line">		<span class="built_in">add</span>(dp[i<span class="number">-1</span>][j][k],dp[i][j][k]);</span><br><span class="line">		<span class="keyword">if</span>(s[i]==<span class="string">&#x27;0&#x27;</span>)<span class="built_in">add</span>(dp[i][j][k+<span class="number">1</span>],dp[i][j][k]);</span><br><span class="line">		<span class="keyword">if</span>(s[i]==<span class="string">&#x27;1&#x27;</span>)<span class="built_in">add</span>(dp[i][j+<span class="number">1</span>][k],dp[i][j][k]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;=n;i++)<span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;=n;j++)<span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">0</span>;k&lt;=n;k++)</span><br><span class="line">		<span class="keyword">if</span>(ok[i][j][k])<span class="built_in">add</span>(res,dp[i][j][k]);</span><br><span class="line">	<span class="built_in">add</span>(res,MOD<span class="number">-1</span>);<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,res);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//https://www.luogu.com.cn/article/vjo8hwnx</span></span><br></pre></td></tr></table></figure>
<p>很厉害啊，就算不压行也比我的短。</p>
<p>可以从我的做法导出这个写法是对的。但考场上我是不会这么写的，主要是不稳，本来做法就需要证明，现在还要写一份需要证明的代码，这在考场上性价比是不高的，万一代码实际上计多了或少了，就又得花时间，所以我不会在考场上写这种代码。</p>
<p>但是在考场外用来观赏或者炫技的话，美观度确实是拉满了，可以学习一下。</p>
<p>至于为什么这样写是对的，不难证明，在此就不再赘述了。</p></div></details>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://oldplace.github.io">player</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://oldplace.github.io/2024/06/26/AGC046-%E8%B5%9B%E5%90%8E%E6%80%BB%E7%BB%93/">http://oldplace.github.io/2024/06/26/AGC046-%E8%B5%9B%E5%90%8E%E6%80%BB%E7%BB%93/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://oldplace.github.io" target="_blank">Oldplace</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="/img/my%20avatar.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="utterances-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/my%20avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">player</div><div class="author-info__description">一个蒟蒻在网络上的温馨小窝</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">158</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">70</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/oldplace" target="_blank" title="Github"><i class="fa-brands fa-github" style="color: #hdhfbb;"></i></a><a class="social-icon" href="https://www.luogu.com.cn/user/65602" target="_blank" title="洛谷"><i class="iconfont icon-luogu" style="color: #1461e6;"></i></a><a class="social-icon" href="https://www.codeforces.com/profile/zhangjianjuncd" target="_blank" title="CodeForces"><i class="fa-solid fa-chart-simple" style="color: #fd9d17;"></i></a><a class="social-icon" href="https://atcoder.jp/users/juruozjj" target="_blank" title="AtCoder"><i class="fa-solid fa-a" style="color: #7e0101;"></i></a><a class="social-icon" href="https://loj.ac/u/zhangjianjunab" target="_blank" title="LibreOJ"><i class="fa-solid fa-l" style="color: #9fa4ad;"></i></a><a class="social-icon" href="https://uoj.ac/user/profile/zhangjianjunab" target="_blank" title="Universal Online Judge"><i class="fa-solid fa-u" style="color: #ece509;"></i></a><a class="social-icon" href="https://ac.nowcoder.com/acm/contest/profile/485838814" target="_blank" title="牛客竞赛"><i class="iconfont icon-niu1" style="color: #3c5867;"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#A-Takahashikun-The-Strider"><span class="toc-number">1.</span> <span class="toc-text">A. Takahashikun, The Strider</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#B-Extension"><span class="toc-number">2.</span> <span class="toc-text">B. Extension</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#C-Shift"><span class="toc-number">3.</span> <span class="toc-text">C. Shift</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#D-Secret-Passage"><span class="toc-number">4.</span> <span class="toc-text">D. Secret Passage</span></a></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2025 By player</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, '']
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script><script>function loadUtterances () {
  let ele = document.createElement('script')
  ele.setAttribute('id', 'utterances_comment')
  ele.setAttribute('src', 'https://utteranc.es/client.js')
  ele.setAttribute('repo', 'oldplace/oldplace.github.io')
  ele.setAttribute('issue-term', 'pathname')
  let nowTheme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'photon-dark' : 'github-light'
  ele.setAttribute('theme', nowTheme)
  ele.setAttribute('crossorigin', 'anonymous')
  ele.setAttribute('async', 'true')
  document.getElementById('utterances-wrap').insertAdjacentElement('afterbegin',ele)
}

function utterancesTheme (theme) {
  const iframe = document.querySelector('.utterances-frame')
  if (iframe) {
    const theme = theme === 'dark' ? 'photon-dark' : 'github-light'
    const message = {
      type: 'set-theme',
      theme: theme
    };
    iframe.contentWindow.postMessage(message, 'https://utteranc.es');
  }
}

btf.addModeChange('utterances', utterancesTheme)

if ('Utterances' === 'Utterances' || !true) {
  if (true) btf.loadComment(document.getElementById('utterances-wrap'), loadUtterances)
  else loadUtterances()
} else {
  function loadOtherComment () {
    loadUtterances()
  }
}</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>